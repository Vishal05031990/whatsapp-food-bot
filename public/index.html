<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Menu</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <style>
        .quantity-button {
            background-color: black;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            line-height: 1;
        }

        .quantity-button:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body class="bg-gray-50">

    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-semibold text-center text-gray-800 mb-6">Menu</h1>
        <div id="menu-container" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            </div>

        <div id="cart" class="mt-10">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Your Cart</h2>
            <div id="cart-items" class="space-y-4">
                </div>
            <div class="flex justify-between items-center mt-6">
                <span class="text-gray-800 font-semibold">Total: </span>
                <span id="cart-total" class="text-green-600 text-xl">₹0</span>
            </div>
            <button id="order-btn" class="w-full bg-green-600 text-white py-2 rounded-md mt-4">Place Order</button>
        </div>
    </div>

    <div id="success-modal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
        <div class="bg-white p-6 rounded-lg w-96">
            <p id="order-confirmation-message" class="text-xl font-semibold text-gray-800"></p>
            <button id="close-modal" class="mt-4 w-full bg-blue-600 text-white py-2 rounded-md">Close</button>
        </div>
    </div>

    <div id="error-modal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
        <div class="bg-white p-6 rounded-lg w-96">
            <p id="error-message" class="text-xl font-semibold text-gray-800"></p>
            <button id="close-error-modal" class="mt-4 w-full bg-red-600 text-white py-2 rounded-md">Close</button>
        </div>
    </div>

    <script>
const menu = [
  {
    id: 1,
    name: 'Dal',
    price: 50,
    imageUrl: 'https://i.ibb.co/wnNL4s5/food-sample.jpg',
    description: 'A classic lentil dish, rich and flavorful.',
  },
  {
    id: 2,
    name: 'Chole',
    price: 60,
    imageUrl: 'https://i.ibb.co/wnNL4s5/food-sample.jpg',
    description: 'Spicy and tangy chickpea curry.',
  },
  {
    id: 3,
    name: 'Rajma',
    price: 55,
    imageUrl: 'https://i.ibb.co/wnNL4s5/food-sample.jpg',
    description: 'Red kidney bean curry, a North Indian favorite.',
  },
  {
    id: 4,
    name: 'Kadi',
    price: 45,
    imageUrl: 'https://i.ibb.co/wnNL4s5/food-sample.jpg',
    description: 'Yogurt-based curry with gram flour dumplings.',
  },
  {
    id: 5,
    name: 'Rice',
    price: 30,
    imageUrl: 'https://i.ibb.co/wnNL4s5/food-sample.jpg',
    description: 'Plain steamed rice, perfect accompaniment to any dish.',
  },
  {
    id: 6,
    name: 'Bread',
    price: 20,
    imageUrl: 'https://i.ibb.co/wnNL4s5/food-sample.jpg',
    description: 'Assorted Indian breads (Roti, Naan).',
  },
];

let cart = [];

document.addEventListener('DOMContentLoaded', () => {
  renderMenu();
  attachEventListeners();
});

function renderMenu() {
  const menuContainer = document.getElementById('menu-container');
  menuContainer.innerHTML = '';

  menu.forEach((item) => {
    const card = document.createElement('div');
    card.className = 'item-card bg-white rounded-lg shadow-md p-4';
    card.dataset.id = item.id;

    card.innerHTML = `
      <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-28 object-cover rounded mb-2" />
      <div class="flex justify-between items-center mb-2">
        <h3 class="text-base font-semibold text-gray-800">${item.name}</h3>
        <span class="text-sm text-gray-600">₹${item.price}</span>
      </div>
      <p class="description text-sm text-gray-600 hidden">${item.description}</p>
      <button class="description-btn text-xs text-[#FF5722] mt-1 underline">Show Description</button>
      <div class="mt-2 flex items-center justify-between">
        <div class="quantity-adjust flex items-center gap-2">
          <button class="quantity-button quantity-minus">-</button>
          <span class="quantity-text">1</span>
          <button class="quantity-button quantity-plus">+</button>
        </div>
        <button class="add-to-cart bg-green-600 text-white px-4 py-1 rounded-md">Add</button>
      </div>
    `;

    menuContainer.appendChild(card);
  });
}

function addToCart(id, quantity) {
  const item = menu.find((menuItem) => menuItem.id === id);
  if (item) {
    const existingItem = cart.find((cartItem) => cartItem.id === id);
    if (existingItem) {
      existingItem.quantity += quantity;
      existingItem.price = item.price * existingItem.quantity;
    } else {
      cart.push({
        ...item,
        quantity: quantity,
        price: item.price * quantity,
      });
    }
    updateCart();
  }
}

function updateCart() {
  const cartItemsContainer = document.getElementById('cart-items');
  const cartTotalElement = document.getElementById('cart-total');
  cartItemsContainer.innerHTML = '';
  let total = 0;

  if (cart.length === 0) {
    cartItemsContainer.innerHTML = '<p class="text-gray-500 italic">No items in your cart</p>';
    cartTotalElement.textContent = '₹0';
    return;
  }

  cart.forEach((item) => {
    const cartItemDiv = document.createElement('div');
    cartItemDiv.className = 'cart-item flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0';
    cartItemDiv.innerHTML = `
          <div>
              <span class="font-semibold text-gray-800">${item.name} x ${item.quantity}</span>
          </div>
          <div class="flex items-center gap-4">
              <span class="text-green-600 font-bold">₹${item.price.toFixed(2)}</span>
              <button class="remove-item text-red-500 hover:text-red-700 transition-colors duration-200" data-id="${item.id}">
                  Remove
              </button>
          </div>
      `;
    cartItemsContainer.appendChild(cartItemDiv);
    total += item.price;
  });

  cartTotalElement.textContent = `₹${total.toFixed(2)}`;
}

function removeFromCart(id) {
  const itemIndex = cart.findIndex((item) => item.id === id);
  if (itemIndex > -1) {
    cart.splice(itemIndex, 1);
    updateCart();
  }
}

function attachEventListeners() {
  document.addEventListener('click', (event) => {
    const target = event.target;

    if (target.classList.contains('add-to-cart')) {
      const card = target.closest('.item-card');
      const id = parseInt(card.dataset.id, 10);
      const quantity = parseInt(card.querySelector('.quantity-text').textContent, 10);
      addToCart(id, quantity);
    }

    if (target.classList.contains('quantity-plus')) {
      const card = target.closest('.item-card');
      const quantityText = card.querySelector('.quantity-text');
      let quantity = parseInt(quantityText.textContent, 10);
      quantity++;
      quantityText.textContent = quantity;
    }

    if (target.classList.contains('quantity-minus')) {
      const card = target.closest('.item-card');
      const quantityText = card.querySelector('.quantity-text');
      let quantity = parseInt(quantityText.textContent, 10);
      if (quantity > 1) {
        quantity--;
      }
      quantityText.textContent = quantity;
    }

    if (target.classList.contains('remove-item')) {
      const id = parseInt(target.dataset.id, 10);
      removeFromCart(id);
    }

    if (target.classList.contains('description-btn')) {
      const desc = target.closest('.item-card').querySelector('.description');
      desc.classList.toggle('hidden');
      target.textContent = desc.classList.contains('hidden')
        ? 'Show Description'
        : 'Hide Description';
    }
  });

  document.getElementById('order-btn').addEventListener('click', () => {
    if (cart.length === 0) {
      alert('Your cart is empty!');
      return;
    }

    //  For demonstration, I'll just log the cart to the console
    console.log('Order submitted:', cart);
    alert('Order submitted! (Check console for order details)');

    //  Clear the cart and update the display
    cart = [];
    updateCart();

    //  Show a confirmation message (you'd replace this with your actual submission logic)
    document.getElementById('order-confirmation-message').textContent =
      'Your order has been placed successfully!';
    document.getElementById('success-modal').classList.remove('hidden');
  });

  document.getElementById('close-modal').addEventListener('click', () => {
    document.getElementById('success-modal').classList.add('hidden');
  });

  document.getElementById('close-error-modal').addEventListener('click', () => {
    document.getElementById('error-modal').classList.add('hidden');
  });
}
    </script>
</body>
</html>
